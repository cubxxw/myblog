(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-296f7918"],{"25e9":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wbs-content-inner"},[a("div",{staticClass:"wbs-main"},[t.is_loaded?a("table",{staticClass:"wbs-form-table"},[a("tbody",[a("tr",[a("th",{staticClass:"row w8em"},[t._v("TDK优化开关")]),a("td",{staticClass:"info"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.active,expression:"opt.active"}],staticClass:"wb-switch",attrs:{type:"checkbox","true-value":"1","false-value":"0"},domProps:{checked:Array.isArray(t.opt.active)?t._i(t.opt.active,null)>-1:t._q(t.opt.active,"1")},on:{change:function(e){var a=t.opt.active,s=e.target,i=s.checked?"1":"0";if(Array.isArray(a)){var n=null,r=t._i(a,n);s.checked?r<0&&t.$set(t.opt,"active",a.concat([n])):r>-1&&t.$set(t.opt,"active",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.opt,"active",i)}}})])]),a("tr",[a("th",{staticClass:"row"},[t._v("标题分隔符号")]),a("td",[a("div",{staticClass:"wbs-selector-separators"},t._l(t.separator,(function(e){return a("label",{key:e,staticClass:"selector-item",class:{selected:e==t.opt.separator}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.separator,expression:"opt.separator"}],attrs:{type:"radio"},domProps:{value:e,checked:t._q(t.opt.separator,e)},on:{change:function(a){return t.$set(t.opt,"separator",e)}}}),t._v(t._s(e))])})),0)])])])]):t._e(),t.is_loaded?a("wbs-tdk-setter",{attrs:{cnf:{separator:t.opt.separator,titleVariables:t.title_variables.base},opt:t.opt.index},on:{change:function(e){t.opt.index=e}}}):t._e(),a("wbs-var-doc")],1),t.is_pro?t._e():a("wbs-more-sources"),a("wbs-ctrl-bar",{on:{submit:t.update_data}})],1)},i=[],n=a("365c"),r=a("46d5"),o=a("6bd9"),c={name:"TdkBase",components:{"wbs-tdk-setter":r["a"],"wbs-var-doc":o["a"]},data:function(){var t=this;return{form_changed:0,is_loaded:0,is_pro:t.$cnf.is_pro,opt:{normal_seo_active:0,index:["","",""],separator:"-"},separator:[],title_variables:{}}},created:function(){var t=this;t.get_data()},methods:{get_data:function(){var t=this;Object(n["b"])({action:t.$cnf.action.act,op:"get_options",key:"tdk",type:"base"}).then((function(e){var a=e.data;t.opt=a.opt,t.separator=a.separator,t.title_variables=a.title_variables,t.is_loaded=1}))},update_data:function(t){var e=this;Object(n["c"])({action:e.$cnf.action.act,op:"update_options",opt:e.opt,key:"tdk",type:"base"}).then((function(a){wbui.toast("设置保存成功"),e.form_changed=1,t&&t()}))}},computed:{},watch:{opt:{handler:function(){this.form_changed++},deep:!0}},beforeRouteLeave:function(t,e,a){var s=this;s.form_changed>1?wbui.open({content:"您修改的设置尚未保存，确定离开此页面吗？",btn:["保存并离开","放弃修改"],yes:function(){return a(!1),s.update_data((function(){a()})),!1},no:function(){return a(),!1}}):a()}},l=c,d=a("5d22"),u=Object(d["a"])(l,s,i,!1,null,null,null);e["default"]=u.exports},"29dd":function(t,e,a){"use strict";var s=a("5b20"),i=a("e8e0"),n=a("3a32"),r=a("f50a"),o="toString",c=RegExp.prototype,l=c[o],d=n((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),u=l.name!=o;(d||u)&&s(RegExp.prototype,o,(function(){var t=i(this),e=String(t.source),a=t.flags,s=String(void 0===a&&t instanceof RegExp&&!("flags"in c)?r.call(t):a);return"/"+e+"/"+s}),{unsafe:!0})},"46d5":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wbs-title-format"},[a("table",{staticClass:"wbs-form-table"},[a("tbody",[a("tr",[a("th",{staticClass:"row w8em"},[t._v("标题")]),a("td",[a("div",{staticClass:"input-with-count"},[a("wbs-title-format",{attrs:{cnf:{dropdownItems:t.cnf.titleVariables},opt:t.tdk[0]},on:{change:t.title_handler}}),a("span",{staticClass:"count"})],1),a("p",{staticClass:"description"},[t._v("一般不超过30个中文字符。")])])]),a("tr",[a("th",[t._v("关键词")]),a("td",[t.cnf.kwMode?a("div",{staticClass:"input-with-count"},[a("wbs-kw-format",{attrs:{cnf:{dropdownItems:t.cnf.titleVariables,variableOnly:!0},opt:t.tdk[1]},on:{change:t.kw_handler}})],1):a("label",{staticClass:"input-with-count wb-tags-module"},[a("wbs-tags-module",{attrs:{tags:t.tdk[1]},on:{"set-tags":t.kw_cpt}})],1),a("p",{staticClass:"description"},[t._v("建议3-5个为宜，切勿进行关键词堆叠。")])])]),a("tr",[a("th",[t._v("描述")]),a("td",[a("div",{staticClass:"input-with-count"},[a("wbs-description-format",{staticClass:"wbs-input-textarea",attrs:{cnf:{dropdownItems:t.cnf.titleVariables},opt:t.tdk[2]},on:{change:t.desc_handler}})],1),a("p",{staticClass:"description"},[t._v("不超100个中文字符，建议50-100字为宜。")])])]),""!=t.tdk[0]||""!=t.tdk[2]?a("tr",[a("th",[t._v("预览")]),a("td",[a("div",{staticClass:"preview-box"},[a("div",{staticClass:"pvb-display"},[a("a",{staticClass:"preview-title"},[t._v(t._s(t.title_preview))]),a("p",{staticClass:"preview-desc"},[t._v(t._s(t.desc_preview))]),a("p",{staticClass:"preview-link"},[t._v(t._s(t.home_url("")))])]),a("div",{staticClass:"pvb-ft"},[t._v("* 搜索引擎收录结果展示预览")])])])]):t._e()])])])},i=[],n=(a("63ba"),a("a336"),a("9065"),a("71d0"),a("86be"),a("29dd"),a("9cda")),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"wb-tags-ctrl"},[a("div",{staticClass:"tag-items"},t._l(t.taglist,(function(e,s){return t.taglist.length?a("div",{staticClass:"tag-item"},[a("span",{staticClass:"vam ib",domProps:{innerHTML:t._s(t.displayFormat(e))}}),a("a",{staticClass:"del",attrs:{"data-del-val":e},on:{click:function(e){return t.delItem(s)}}})]):t._e()})),0),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cur_input,expression:"cur_input"}],staticClass:"wb-tag-input",attrs:{type:"text",placeholder:"输入选项值, 回车确认 *"},domProps:{value:t.cur_input},on:{keyup:t.wbTagInput,input:function(e){e.target.composing||(t.cur_input=e.target.value)}}})])},o=[],c=(a("2cde"),a("b170"),a("a08b"),a("5938"),{name:"wbsTags",props:{tags:String,format:String},data:function(){return{cur_input:"",taglist:[],keycode:null}},created:function(){this.taglist=this.tags?this.tags.split(","):[]},methods:{wbTagInput:function(t){var e=this,a=t.keyCode;13===a&&e.wbTagPush()},wbTagPush:function(t){var e=this;return""!=e.cur_input&&(e.taglist.indexOf(e.cur_input.trim())>-1?(wbui.toast("已存在"),e.cur_input="",!1):(e.taglist.push(e.cur_input),e.$emit("set-tags",e.taglist.join(",")),e.cur_input="",!1))},delItem:function(t){var e=this;wbui.confirm("确认删除该选项？",(function(){e.taglist.splice(t,1),e.$emit("set-tags",e.taglist.join(",")),wbui.toast("已移除")}))},displayFormat:function(t){var e=t.split(":");return e.length>1?e[1]+'<em class="wk">(别名:'+e[0]+")</em>":t}},computed:{}}),l=c,d=a("5d22"),u=Object(d["a"])(l,r,o,!1,null,null,null),p=u.exports,f={name:"TdkSetter",props:{opt:{type:Array,value:[]},cnf:{type:Object,value:{separator:"",titleVariables:{},kwMode:0}}},components:{"wbs-title-format":n["a"],"wbs-kw-format":n["a"],"wbs-description-format":n["a"],"wbs-tags-module":p},data:function(){var t=this;return{tdk:t.opt||["","",""],title_preview:"",desc_preview:"",variables_keys_title:Object.keys(t.cnf.titleVariables)}},computed:{},created:function(){},mounted:function(){var t=this;t.title_preview=t.preview_handler(t.opt[0],t.cnf.titleVariables),t.desc_preview=t.preview_handler(t.opt[2],t.cnf.titleVariables)},methods:{title_handler:function(t){var e=this;e.tdk[0]=t,e.title_preview=e.preview_handler(t,e.cnf.titleVariables),e.$emit("change",e.tdk)},kw_handler:function(t){var e=this;t=t.replace(/(%\w+%)/g,",$1,"),t=t.replace(/,,/g,","),t=t.replace(/^,/g,""),t=t.replace(/,$/gi,""),e.tdk[1]=t,e.$emit("change",e.tdk)},kw_cpt:function(t){var e=this;e.tdk[1]=t,e.$emit("change",e.tdk)},desc_handler:function(t){var e=this;e.tdk[2]=t,e.desc_preview=e.preview_handler(t,e.cnf.titleVariables),e.$emit("change",e.tdk)},preview_handler:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this,s=Object.keys(e);return""==t?"":(s.forEach((function(a){if(t.indexOf(a)<0)return!1;t=t.replace(new RegExp(a,"g")," "+e[a]+" ")})),t=t.replace(new RegExp("分隔符","g"),a.cnf.separator),t=t.replace(new RegExp("站点标题","g"),a.$cnf.site_info.site_title),t=t.replace(new RegExp("站点副标题","g"),a.$cnf.site_info.site_subtitle),t)},home_url:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this;return e.$cnf.home_url+t}},watch:{opt:{handler:function(t){var e=this;e.tdk=t}}}},v=f,b=Object(d["a"])(v,s,i,!1,null,null,null);e["a"]=b.exports},"6bd9":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt log-box"},[a("table",{staticClass:"wbs-form-table"},[a("tbody",[a("tr",[a("th",{staticClass:"row w8em"}),a("td",[a("el-button",{attrs:{size:"medium",type:"primary",plain:"",icon:"el-icon-collection"},on:{click:function(e){t.unfold=!t.unfold}}},[t._v("变量注释")]),a("table",{directives:[{name:"show",rawName:"v-show",value:t.unfold,expression:"unfold"}],staticClass:"wbs-table wbs-table-doc table-hover mt"},[t._m(0),a("tbody",t._l(t.doc_items,(function(e){return a("tr",[a("td",[a("b",[t._v(t._s(e.name))])]),a("td",{domProps:{innerHTML:t._s(e.desc)}})])})),0)])],1)])])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("td",[t._v("变量名称")]),a("td",[t._v("变量说明")])])])}],n=a("365c"),r={name:"comVariableDoc",data:function(){return{doc_items:[],unfold:!1}},created:function(){var t=this,e=localStorage.getItem("WB_SST_DOC");e=e?JSON.parse(e):null,e&&e.ver==t.$cnf.pd_version?t.doc_items=e.data:Object(n["b"])({action:t.$cnf.action.act,op:"doc"}).then((function(e){t.doc_items=e["data"],localStorage.setItem("WB_SST_DOC",JSON.stringify({ver:t.$cnf.pd_version,data:e["data"]}))}))}},o=r,c=a("5d22"),l=Object(c["a"])(o,s,i,!1,null,null,null);e["a"]=l.exports},"86be":function(t,e,a){var s=a("14b8"),i=a("cc50"),n=a("af0d"),r=a("aeec"),o=a("15b7").f,c=a("d7eb").f,l=a("7e76"),d=a("f50a"),u=a("d0da"),p=a("5b20"),f=a("3a32"),v=a("4183").set,b=a("bac2"),_=a("0ebe"),h=_("match"),m=i.RegExp,w=m.prototype,g=/a/g,k=/a/g,y=new m(g)!==g,C=u.UNSUPPORTED_Y,x=s&&n("RegExp",!y||C||f((function(){return k[h]=!1,m(g)!=g||m(k)==k||"/a/i"!=m(g,"i")})));if(x){var $=function(t,e){var a,s=this instanceof $,i=l(t),n=void 0===e;if(!s&&i&&t.constructor===$&&n)return t;y?i&&!n&&(t=t.source):t instanceof $&&(n&&(e=d.call(t)),t=t.source),C&&(a=!!e&&e.indexOf("y")>-1,a&&(e=e.replace(/y/g,"")));var o=r(y?new m(t,e):m(t,e),s?this:w,$);return C&&a&&v(o,{sticky:a}),o},O=function(t){t in $||o($,t,{configurable:!0,get:function(){return m[t]},set:function(e){m[t]=e}})},E=c(m),j=0;while(E.length>j)O(E[j++]);w.constructor=$,$.prototype=w,p(i,"RegExp",$)}b("RegExp")},a08b:function(t,e,a){"use strict";var s=a("bde0"),i=a("bd65"),n=a("52fa"),r=a("1201"),o=[].join,c=i!=Object,l=r("join",",");s({target:"Array",proto:!0,forced:c||!l},{join:function(t){return o.call(n(this),void 0===t?",":t)}})},aeec:function(t,e,a){var s=a("b0f9"),i=a("eaf1");t.exports=function(t,e,a){var n,r;return i&&"function"==typeof(n=e.constructor)&&n!==a&&s(r=n.prototype)&&r!==a.prototype&&i(t,r),t}}}]);