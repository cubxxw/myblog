(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38d58adb"],{"1fa9":function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"2bad":function(t,e,a){var s=a("3a32"),n=a("1fa9"),o="​᠎";t.exports=function(t){return s((function(){return!!n[t]()||o[t]()!=o||n[t].name!==t}))}},5938:function(t,e,a){"use strict";var s=a("bde0"),n=a("42b5"),o=a("b120"),r=a("33c6"),i=a("b2de"),c=a("f48b"),l=a("b4b0"),u=a("5034"),p=u("splice"),_=Math.max,d=Math.min,b=9007199254740991,f="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!p},{splice:function(t,e){var a,s,u,p,v,m,h=i(this),k=r(h.length),w=n(t,k),g=arguments.length;if(0===g?a=s=0:1===g?(a=0,s=k-w):(a=g-2,s=d(_(o(e),0),k-w)),k+a-s>b)throw TypeError(f);for(u=c(h,s),p=0;p<s;p++)v=w+p,v in h&&l(u,p,h[v]);if(u.length=s,a<s){for(p=w;p<k-s;p++)v=p+s,m=p+a,v in h?h[m]=h[v]:delete h[m];for(p=k;p>k-s+a;p--)delete h[p-1]}else if(a>s)for(p=k-s;p>w;p--)v=p+s-1,m=p+a-1,v in h?h[m]=h[v]:delete h[m];for(p=0;p<a;p++)h[p+w]=arguments[p+2];return h.length=k-s+a,u}})},6485:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wbs-content-inner"},[a("div",{staticClass:"wbs-main"},[t.is_loaded?a("div",{staticClass:"sc-body"},[a("table",{staticClass:"wbs-form-table"},[a("tbody",[a("tr",[a("th",{staticClass:"w8em"},[t._v("失效URL检测开启")]),a("td",{staticClass:"info"},[a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.active,expression:"opt.active"}],staticClass:"wb-switch",attrs:{type:"checkbox","true-value":"1","false-value":"0"},domProps:{checked:Array.isArray(t.opt.active)?t._i(t.opt.active,null)>-1:t._q(t.opt.active,"1")},on:{change:function(e){var a=t.opt.active,s=e.target,n=s.checked?"1":"0";if(Array.isArray(a)){var o=null,r=t._i(a,o);s.checked?r<0&&t.$set(t.opt,"active",a.concat([o])):r>-1&&t.$set(t.opt,"active",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.opt,"active",n)}}})])])]),a("tr",[a("th",[t._v("检测频率")]),a("td",[a("div",{staticClass:"selector-bar"},t._l(t.cnf.test_rate,(function(e,s){return a("label",{key:e},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.test_rate,expression:"opt.test_rate"}],attrs:{type:"radio"},domProps:{value:s,checked:t._q(t.opt.test_rate,s)},on:{change:function(e){return t.$set(t.opt,"test_rate",s)}}}),a("span",[t._v(t._s(e))])])})),0)])])]),a("tbody",{directives:[{name:"show",rawName:"v-show",value:t.viewAllOption,expression:"viewAllOption"}]},[a("tr",[a("th",[t._v("检测范围")]),a("td",[a("div",{staticClass:"selector-bar"},[a("div",{staticClass:"label"},[t._v("文章类型")]),t._l(t.post_types,(function(e,s){return a("label",{key:s},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.post_type,expression:"opt.post_type"}],attrs:{type:"checkbox"},domProps:{value:s,checked:Array.isArray(t.opt.post_type)?t._i(t.opt.post_type,s)>-1:t.opt.post_type},on:{change:function(e){var a=t.opt.post_type,n=e.target,o=!!n.checked;if(Array.isArray(a)){var r=s,i=t._i(a,r);n.checked?i<0&&t.$set(t.opt,"post_type",a.concat([r])):i>-1&&t.$set(t.opt,"post_type",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.opt,"post_type",o)}}}),a("span",[t._v(t._s(e.name))])])}))],2),a("div",{staticClass:"selector-bar mt"},[a("div",{staticClass:"label"},[t._v("文章状态")]),t._l(t.post_statuses,(function(e,s){return a("label",{key:s},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.post_status,expression:"opt.post_status"}],attrs:{type:"checkbox"},domProps:{value:s,checked:Array.isArray(t.opt.post_status)?t._i(t.opt.post_status,s)>-1:t.opt.post_status},on:{change:function(e){var a=t.opt.post_status,n=e.target,o=!!n.checked;if(Array.isArray(a)){var r=s,i=t._i(a,r);n.checked?i<0&&t.$set(t.opt,"post_status",a.concat([r])):i>-1&&t.$set(t.opt,"post_status",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.opt,"post_status",o)}}}),a("span",[t._v(t._s(e.name))])])}))],2)])]),a("tr",[a("th",[t._v("排除域名列表")]),a("td",[a("wbs-custom-links",{attrs:{items:t.opt.exclude,mode:1,placeholder:"例如：yourdomain.com"},on:{"set-tags":function(e){t.opt.exclude=e}}}),a("div",{staticClass:"description mt"},[t._v("*无需填写http(s)://协议头，仅填写主域名即可。如：yourdomain.com")])],1)]),t._e()])]),a("a",{staticClass:"wb-btn-more",class:t.viewAllOption?"unfold":"",on:{click:function(e){t.viewAllOption=!t.viewAllOption}}},[a("svg",{staticClass:"wb-icon",attrs:{id:"arrow-down",viewBox:"0 0 32 32",width:"100%",height:"100%"}},[a("path",{attrs:{d:"M15.839 19.568h-.002a1.43 1.43 0 0 1-1.017-.423L.391 4.7c-.261-.262-.422-.622-.422-1.021s.161-.76.422-1.021a1.44 1.44 0 0 1 2.04 0l13.408 13.423L29.247 2.658a1.443 1.443 0 0 1 2.04 2.042L16.859 19.145c-.26.261-.62.423-1.018.423h-.002z"}}),a("path",{attrs:{d:"M15.839 29.75h-.002a1.43 1.43 0 0 1-1.017-.423L.391 14.882c-.261-.262-.422-.622-.422-1.021s.161-.76.422-1.021a1.44 1.44 0 0 1 2.04 0l13.408 13.423L29.247 12.84a1.443 1.443 0 0 1 2.04 2.042L16.859 29.327c-.26.261-.62.423-1.018.423h-.002z"}})]),a("span",[t._v(t._s(t.viewAllOption?"收起":"展开")+"更多选项")])])]):t._e(),t._m(0),t.is_loaded?a("div",{staticClass:"sc-body log-box"},[a("div",{staticClass:"tab-nav",attrs:{id:"broken_url_type"}},[a("a",{staticClass:"tn-item",class:{current:0==t.type},on:{click:function(e){return t.switch_tab(0)}}},[t._v("全部 ("+t._s(t.total)+")")]),a("a",{staticClass:"tn-item",class:{current:3==t.type},on:{click:function(e){return t.switch_tab(3)}}},[t._v("正常 ("+t._s(t.broken_url_sum["ok"])+")")]),a("a",{staticClass:"tn-item",class:{current:1==t.type},on:{click:function(e){return t.switch_tab(1)}}},[t._v("异常 ("+t._s(t.broken_url_sum["error"])+")")]),a("a",{staticClass:"tn-item",class:{current:2==t.type},on:{click:function(e){return t.switch_tab(2)}}},[t._v("重定向 ("+t._s(t.broken_url_sum["redirect"])+")")])]),a("el-table",{staticClass:"wbs-table mt",staticStyle:{width:"100%"},attrs:{data:t.broken_url},on:{"selection-change":t.handle_selection_change}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"URL","class-name":"w30"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"url",attrs:{"data-label":"URL",href:e.row.url,target:"_blank"}},[t._v(t._s(e.row.url))])]}}],null,!1,473107009)}),a("el-table-column",{attrs:{label:"状态","class-name":"w10"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{attrs:{"data-label":"状态"}},[a("span",[t._v(t._s(e.row.code))])])]}}],null,!1,3912049159)}),a("el-table-column",{attrs:{label:"文章","class-name":"w35"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{attrs:{"data-label":"文章"}},[a("span",[t._v(t._s(e.row.post_title))])])]}}],null,!1,1034503837)}),a("el-table-column",{attrs:{label:"操作",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{plain:"",size:"mini",type:"danger"},on:{click:function(a){return t.check_broken(e.row)}}},[t._v("重新检查")]),a("el-button",{attrs:{size:"mini",type:"success",plain:""},on:{click:function(a){return t.edit_post(e.row.edit_url)}}},[t._v("编辑文章")]),a("el-button",{attrs:{size:"mini",type:"success",plain:""},on:{click:function(a){return t.remove_broken(e.row,e.$index)}}},[t._v("取消链接")]),/^(4|5|e)/.test(e.row.code)?a("el-button",{attrs:{size:"mini",type:"success",plain:""},on:{click:function(a){return t.mark_broken_url(e.row)}}},[t._v("未失效")]):t._e()]}}],null,!1,149025980)})],1),a("table",{staticClass:"table wbs-table mt"},[t.total>0?a("tfoot",{attrs:{id:"broken_footer"}},[t._m(1)]):t._e()]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.broken_url.length>0,expression:"broken_url.length>0"}],staticClass:"btns-bar"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","page-size":1*t.page_num,total:1*t.record_total},on:{"current-change":t.nav_page}})],1)],1):t._e()]),t.is_pro?t._e():a("wbs-more-sources"),a("wbs-ctrl-bar",{on:{submit:t.update_data}})],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h3",{staticClass:"sc-title-sub"},[a("span",[t._v("失效URL")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticStyle:{width:"55px"}},[a("input",{staticClass:"batch_broken_chk",attrs:{type:"checkbox"}})]),a("td",[a("select",{attrs:{id:"broken_url_batch"}},[a("option",{attrs:{value:""}},[t._v("批量操作")]),a("option",{attrs:{value:"update"}},[t._v("重新检查")]),a("option",{attrs:{value:"cancel"}},[t._v("取消链接")]),a("option",{attrs:{value:"ok"}},[t._v("未失效")])]),a("button",{staticClass:"button-secondary",attrs:{id:"broken_url_batch_submit",type:"button"}},[t._v("应用")])]),a("td",{staticClass:"align-right"},[a("button",{staticClass:"button-primary",attrs:{id:"clear_broken_url",type:"button"}},[t._v("重新检测")])])])}],o=(a("5938"),a("365c")),r=a("8856"),i={name:"UrlBroken",components:{"wbs-custom-links":r["a"]},data:function(){var t=this;return{form_changed:0,is_loaded:0,is_pro:t.$cnf.is_pro,opt:{},cnf:{},type:0,offset:0,page:1,page_num:20,record_total:0,post_statuses:[],post_types:[],broken_url:[],total:0,broken_url_sum:0,viewAllOption:0}},created:function(){var t=this;t.get_data(),t.load_data()},methods:{get_data:function(){var t=this;Object(o["b"])({action:t.$cnf.action.act,op:"get_options",key:"url_broken"}).then((function(e){t.opt=e.data.opt,t.cnf=e.data.cnf,t.total=e.data.total,t.post_types=e.data.post_types,t.post_statuses=e.data.post_statuses,t.broken_url_sum=e.data.broken_url_sum,t.is_loaded=1}))},load_data:function(){var t=this;Object(o["a"])({action:t.$cnf.action.act,op:"broken_url",page:t.page,offset:t.offset,type:t.type}).then((function(e){t.broken_url=e.data,t.record_total=e.record_total,t.page_num=e.page_num}))},update_data:function(t){var e=this;Object(o["c"])({action:e.$cnf.action.act,op:"update_options",opt:e.opt,key:"broken"}).then((function(a){wbui.toast("设置保存成功"),e.form_changed=1,t&&t()}))},nav_page:function(t){this.page=t,this.load_data()},switch_tab:function(t){var e=this;e.type=t,e.page=1,e.load_data()},handle_selection_change:function(){},edit_post:function(t){window.open(t)},mark_broken_url:function(t){return wbui.confirm("确认标记为未失效？",(function(){jQuery.post(ajaxurl,{action:"wb_smart_seo_tool",op:"mark_broken_url",id:t.id},(function(e){t.code="200",wbui.toast("标记成功")}),"json")})),!1},remove_broken:function(t,e){var a=this;return wbui.confirm("确认删除？",(function(){jQuery.post(ajaxurl,{action:"wb_smart_seo_tool",op:"remove_broken",id:t.id},(function(t){a.broken_url.splice(e,1),wbui.toast("已移除")}),"json")})),!1},check_broken:function(t){return jQuery.post(ajaxurl,{action:"wb_smart_seo_tool",op:"check_broken",id:t.id},(function(e){t.code=e.data,wbui&&wbui.toast("检测结果为["+e.data+"]")}),"json"),!1}},watch:{opt:{handler:function(){this.form_changed++},deep:!0}},beforeRouteLeave:function(t,e,a){var s=this;s.form_changed>1?wbui.open({content:"您修改的设置尚未保存，确定离开此页面吗？",btn:["保存并离开","放弃修改"],yes:function(){return a(!1),s.update_data((function(){a()})),!1},no:function(){return a(),!1}}):a()}},c=i,l=a("5d22"),u=Object(l["a"])(c,s,n,!1,null,null,null);e["default"]=u.exports},8856:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wbs-custom-links"},[a("label",{staticClass:"wb-links-input-box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.cur_input,expression:"cur_input"}],staticClass:"wbs-input wbs-input-short",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.cur_input},on:{keyup:t.wbTagInput,input:function(e){e.target.composing||(t.cur_input=e.target.value)}}}),a("a",{staticClass:"ml link",on:{click:t.wbTagPush}},[t._v("添加 +")])]),t.items.length?a("div",{staticClass:"links-items"},t._l(t.items,(function(e,s){return a("div",{key:s,staticClass:"link-item"},[a("span",{staticClass:"item-value",domProps:{innerHTML:t._s(t.displayFormat(e))}}),a("span",{staticClass:"del",attrs:{"data-del-val":e},on:{click:function(e){return t.delItem(s)}}},[a("i",{staticClass:"el-icon-delete"})])])})),0):t._e()])},n=[],o=(a("c0e8"),a("a336"),a("9065"),a("b170"),a("5938"),{name:"comCustomLinks",props:{items:Array,mode:Number,placeholder:String},data:function(){return{cur_input:"",taglist:[],keycode:null}},created:function(){this.taglist=this.items?this.items:[]},methods:{wbTagInput:function(t){var e=this,a=t.keyCode;188===a&&(e.cur_input=e.cur_input.replace(/(^,)|(,$)/,"")),13===a&&(e.wbTagPush(),event.stopPropagation())},wbTagPush:function(t){var e=this;return""!=e.cur_input&&(e.taglist.indexOf(e.cur_input.trim())>-1?(wbui.toast("已存在"),e.cur_input="",!1):(e.taglist.push(e.cur_input),e.$emit("set-tags",e.taglist),e.cur_input="",!1))},delItem:function(t){var e=this;wbui.confirm("确认删除？",(function(){e.taglist.splice(t,1),e.$emit("set-tags",e.taglist),wbui.toast("已移除")}))},displayFormat:function(t){return t}}}),r=o,i=a("5d22"),c=Object(i["a"])(r,s,n,!1,null,null,null);e["a"]=c.exports},aeec:function(t,e,a){var s=a("b0f9"),n=a("eaf1");t.exports=function(t,e,a){var o,r;return n&&"function"==typeof(o=e.constructor)&&o!==a&&s(r=o.prototype)&&r!==a.prototype&&n(t,r),t}},b170:function(t,e,a){"use strict";var s=a("bde0"),n=a("e506").trim,o=a("2bad");s({target:"String",proto:!0,forced:o("trim")},{trim:function(){return n(this)}})},c0e8:function(t,e,a){"use strict";var s=a("14b8"),n=a("cc50"),o=a("af0d"),r=a("5b20"),i=a("533c"),c=a("08ee"),l=a("aeec"),u=a("3679"),p=a("3a32"),_=a("c1e7"),d=a("d7eb").f,b=a("c6eb").f,f=a("15b7").f,v=a("e506").trim,m="Number",h=n[m],k=h.prototype,w=c(_(k))==m,g=function(t){var e,a,s,n,o,r,i,c,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=v(l),e=l.charCodeAt(0),43===e||45===e){if(a=l.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:s=2,n=49;break;case 79:case 111:s=8,n=55;break;default:return+l}for(o=l.slice(2),r=o.length,i=0;i<r;i++)if(c=o.charCodeAt(i),c<48||c>n)return NaN;return parseInt(o,s)}return+l};if(o(m,!h(" 0o1")||!h("0b1")||h("+0x1"))){for(var y,C=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof C&&(w?p((function(){k.valueOf.call(a)})):c(a)!=m)?l(new h(g(e)),a,C):g(e)},x=s?d(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),A=0;x.length>A;A++)i(h,y=x[A])&&!i(C,y)&&f(C,y,b(h,y));C.prototype=k,k.constructor=C,r(n,m,C)}},e506:function(t,e,a){var s=a("0766"),n=a("1fa9"),o="["+n+"]",r=RegExp("^"+o+o+"*"),i=RegExp(o+o+"*$"),c=function(t){return function(e){var a=String(s(e));return 1&t&&(a=a.replace(r,"")),2&t&&(a=a.replace(i,"")),a}};t.exports={start:c(1),end:c(2),trim:c(3)}}}]);