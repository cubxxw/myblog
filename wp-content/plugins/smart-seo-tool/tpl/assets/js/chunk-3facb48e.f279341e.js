(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3facb48e"],{"29dd":function(t,e,a){"use strict";var n=a("5b20"),o=a("e8e0"),i=a("3a32"),r=a("f50a"),s="toString",c=RegExp.prototype,l=c[s],d=i((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),u=l.name!=s;(d||u)&&n(RegExp.prototype,s,(function(){var t=o(this),e=String(t.source),a=t.flags,n=String(void 0===a&&t instanceof RegExp&&!("flags"in c)?r.call(t):a);return"/"+e+"/"+n}),{unsafe:!0})},"46d5":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wbs-title-format"},[a("table",{staticClass:"wbs-form-table"},[a("tbody",[a("tr",[a("th",{staticClass:"row w8em"},[t._v("标题")]),a("td",[a("div",{staticClass:"input-with-count"},[a("wbs-title-format",{attrs:{cnf:{dropdownItems:t.cnf.titleVariables},opt:t.tdk[0]},on:{change:t.title_handler}}),a("span",{staticClass:"count"})],1),a("p",{staticClass:"description"},[t._v("一般不超过30个中文字符。")])])]),a("tr",[a("th",[t._v("关键词")]),a("td",[t.cnf.kwMode?a("div",{staticClass:"input-with-count"},[a("wbs-kw-format",{attrs:{cnf:{dropdownItems:t.cnf.titleVariables,variableOnly:!0},opt:t.tdk[1]},on:{change:t.kw_handler}})],1):a("label",{staticClass:"input-with-count wb-tags-module"},[a("wbs-tags-module",{attrs:{tags:t.tdk[1]},on:{"set-tags":t.kw_cpt}})],1),a("p",{staticClass:"description"},[t._v("建议3-5个为宜，切勿进行关键词堆叠。")])])]),a("tr",[a("th",[t._v("描述")]),a("td",[a("div",{staticClass:"input-with-count"},[a("wbs-description-format",{staticClass:"wbs-input-textarea",attrs:{cnf:{dropdownItems:t.cnf.titleVariables},opt:t.tdk[2]},on:{change:t.desc_handler}})],1),a("p",{staticClass:"description"},[t._v("不超100个中文字符，建议50-100字为宜。")])])]),""!=t.tdk[0]||""!=t.tdk[2]?a("tr",[a("th",[t._v("预览")]),a("td",[a("div",{staticClass:"preview-box"},[a("div",{staticClass:"pvb-display"},[a("a",{staticClass:"preview-title"},[t._v(t._s(t.title_preview))]),a("p",{staticClass:"preview-desc"},[t._v(t._s(t.desc_preview))]),a("p",{staticClass:"preview-link"},[t._v(t._s(t.home_url("")))])]),a("div",{staticClass:"pvb-ft"},[t._v("* 搜索引擎收录结果展示预览")])])])]):t._e()])])])},o=[],i=(a("63ba"),a("a336"),a("9065"),a("71d0"),a("86be"),a("29dd"),a("9cda")),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"wb-tags-ctrl"},[a("div",{staticClass:"tag-items"},t._l(t.taglist,(function(e,n){return t.taglist.length?a("div",{staticClass:"tag-item"},[a("span",{staticClass:"vam ib",domProps:{innerHTML:t._s(t.displayFormat(e))}}),a("a",{staticClass:"del",attrs:{"data-del-val":e},on:{click:function(e){return t.delItem(n)}}})]):t._e()})),0),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cur_input,expression:"cur_input"}],staticClass:"wb-tag-input",attrs:{type:"text",placeholder:"输入选项值, 回车确认 *"},domProps:{value:t.cur_input},on:{keyup:t.wbTagInput,input:function(e){e.target.composing||(t.cur_input=e.target.value)}}})])},s=[],c=(a("2cde"),a("b170"),a("a08b"),a("5938"),{name:"wbsTags",props:{tags:String,format:String},data:function(){return{cur_input:"",taglist:[],keycode:null}},created:function(){this.taglist=this.tags?this.tags.split(","):[]},methods:{wbTagInput:function(t){var e=this,a=t.keyCode;13===a&&e.wbTagPush()},wbTagPush:function(t){var e=this;return""!=e.cur_input&&(e.taglist.indexOf(e.cur_input.trim())>-1?(wbui.toast("已存在"),e.cur_input="",!1):(e.taglist.push(e.cur_input),e.$emit("set-tags",e.taglist.join(",")),e.cur_input="",!1))},delItem:function(t){var e=this;wbui.confirm("确认删除该选项？",(function(){e.taglist.splice(t,1),e.$emit("set-tags",e.taglist.join(",")),wbui.toast("已移除")}))},displayFormat:function(t){var e=t.split(":");return e.length>1?e[1]+'<em class="wk">(别名:'+e[0]+")</em>":t}},computed:{}}),l=c,d=a("5d22"),u=Object(d["a"])(l,r,s,!1,null,null,null),p=u.exports,_={name:"TdkSetter",props:{opt:{type:Array,value:[]},cnf:{type:Object,value:{separator:"",titleVariables:{},kwMode:0}}},components:{"wbs-title-format":i["a"],"wbs-kw-format":i["a"],"wbs-description-format":i["a"],"wbs-tags-module":p},data:function(){var t=this;return{tdk:t.opt||["","",""],title_preview:"",desc_preview:"",variables_keys_title:Object.keys(t.cnf.titleVariables)}},computed:{},created:function(){},mounted:function(){var t=this;t.title_preview=t.preview_handler(t.opt[0],t.cnf.titleVariables),t.desc_preview=t.preview_handler(t.opt[2],t.cnf.titleVariables)},methods:{title_handler:function(t){var e=this;e.tdk[0]=t,e.title_preview=e.preview_handler(t,e.cnf.titleVariables),e.$emit("change",e.tdk)},kw_handler:function(t){var e=this;t=t.replace(/(%\w+%)/g,",$1,"),t=t.replace(/,,/g,","),t=t.replace(/^,/g,""),t=t.replace(/,$/gi,""),e.tdk[1]=t,e.$emit("change",e.tdk)},kw_cpt:function(t){var e=this;e.tdk[1]=t,e.$emit("change",e.tdk)},desc_handler:function(t){var e=this;e.tdk[2]=t,e.desc_preview=e.preview_handler(t,e.cnf.titleVariables),e.$emit("change",e.tdk)},preview_handler:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this,n=Object.keys(e);return""==t?"":(n.forEach((function(a){if(t.indexOf(a)<0)return!1;t=t.replace(new RegExp(a,"g")," "+e[a]+" ")})),t=t.replace(new RegExp("分隔符","g"),a.cnf.separator),t=t.replace(new RegExp("站点标题","g"),a.$cnf.site_info.site_title),t=t.replace(new RegExp("站点副标题","g"),a.$cnf.site_info.site_subtitle),t)},home_url:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this;return e.$cnf.home_url+t}},watch:{opt:{handler:function(t){var e=this;e.tdk=t}}}},f=_,m=Object(d["a"])(f,n,o,!1,null,null,null);e["a"]=m.exports},"4add":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wbs-content-inner"},[a("div",{staticClass:"wbs-main"},[a("table",{staticClass:"wbs-form-table"},[a("tbody",[a("tr",[a("th",{staticClass:"row w8em"},[t._v("索引")]),a("td",{staticClass:"selector-bar"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.noindex,expression:"noindex"}],attrs:{type:"radio",value:"0"},domProps:{checked:t._q(t.noindex,"0")},on:{click:function(e){return t.set_noindex(e)},change:function(e){t.noindex="0"}}}),t._v(" 索引")]),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.noindex,expression:"noindex"}],attrs:{type:"radio",value:"1"},domProps:{checked:t._q(t.noindex,"1")},on:{click:function(e){return t.set_noindex(e)},change:function(e){t.noindex="1"}}}),t._v(" 不索引")])])]),a("tr",[a("th",{staticClass:"row"},[t._v("选项")]),a("td",{staticClass:"selector-bar"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.category_mode,expression:"opt.category_mode"}],attrs:{type:"radio",value:"1"},domProps:{checked:t._q(t.opt.category_mode,"1")},on:{change:function(e){return t.$set(t.opt,"category_mode","1")}}}),a("span",[t._v("简易模式")])]),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.category_mode,expression:"opt.category_mode"}],attrs:{type:"radio",value:"2"},domProps:{checked:t._q(t.opt.category_mode,"2")},on:{change:function(e){return t.$set(t.opt,"category_mode","2")}}}),a("span",[t._v("高级模式")])])])])])]),1==t.opt.category_mode?a("div",[a("wbs-tdk-setter",{attrs:{cnf:{separator:t.opt.separator,titleVariables:t.title_variables,kwMode:1},opt:t.opt.term_base},on:{change:function(e){t.opt.term_base=e}}})],1):t._e(),2==t.opt.category_mode?a("div",[a("table",{staticClass:"wbs-form-table"},[a("tbody",[a("tr",[a("th",{staticClass:"row w8em"},[t._v("选择分类")]),a("td",{staticClass:"info"},[a("div",{staticClass:"wbs-ctrl-bar"},[t.all_taxonomy.length>1?a("el-select",{staticClass:"ctrl-item",attrs:{clearable:"",filterable:"",placeholder:"所有类型"},on:{change:function(e){return t.change_taxonomy()}},model:{value:t.taxonomy,callback:function(e){t.taxonomy=e},expression:"taxonomy"}},t._l(t.all_taxonomy,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1):t._e(),t.list_cate.length>0?a("el-select",{staticClass:"ctrl-item ml",attrs:{clearable:"",filterable:"",placeholder:"所有分类"},on:{change:function(e){return t.change_category()}},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}},t._l(t.list_cate,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.term_id}})})),1):t._e()],1)])])])]),""!=t.category&&t.isReload?a("wbs-tdk-setter",{attrs:{cnf:{separator:t.opt.separator,titleVariables:t.title_variables},opt:t.cur_cate},on:{change:function(e){return t.update_term_tdk(e)}}}):t._e()],1):t._e(),a("wbs-var-doc")],1),t.is_pro?t._e():a("wbs-more-sources"),a("wbs-ctrl-bar",{on:{submit:t.update_data}})],1)},o=[],i=(a("5938"),a("365c")),r=a("46d5"),s=a("6bd9"),c={name:"TdkCategory",components:{"wbs-tdk-setter":r["a"],"wbs-var-doc":s["a"]},data:function(){var t=this;return{form_changed:0,is_loaded:0,is_pro:t.$cnf.is_pro,opt:{},all_taxonomy:[],all_category:[],list_cate:[],separator:[],title_variables:{},taxonomy:"",category:"",noindex:0,cur_cate:["","",""],isReload:1}},computed:{},created:function(){var t=this;t.get_data()},methods:{reload:function(){var t=this;this.isReload=!1,this.$nextTick((function(){return t.isReload=!0}))},set_noindex:function(t){var e=this,a=e.opt.noindex.indexOf("category"),n=1*t.target.value;n&&a<0?e.opt.noindex.push("category"):!n&&a>-1&&e.opt.noindex.splice(a,1)},update_term_tdk:function(t){var e=this;e.category&&(e.opt[e.category]=t)},change_category:function(){var t=this;t.cur_cate=["","",""],t.category&&t.opt[t.category]&&(t.cur_cate=t.opt[t.category]),t.reload()},change_taxonomy:function(){var t=this;t.category="",t.cur_cate=["","",""],t.list_cate=[],t.all_category.length<1||""!=t.taxonomy&&t.all_category[t.taxonomy]&&(t.list_cate=t.all_category[t.taxonomy],t.reload())},get_data:function(){var t=this;Object(i["b"])({action:t.$cnf.action.act,op:"get_options",key:"tdk",type:"category"}).then((function(e){var a=e.data;t.opt=a.opt,t.opt.noindex&&t.opt.noindex.indexOf("category")>-1&&(t.noindex=1),t.separator=a.separator,t.title_variables=a.title_variables["category"],t.all_taxonomy=a.all_taxonomy,t.all_category=a.all_category,1==t.all_taxonomy.length&&(t.taxonomy=t.all_taxonomy[0].id,t.change_taxonomy()),t.is_loaded=1}))},update_data:function(t){var e=this;Object(i["c"])({action:e.$cnf.action.act,op:"update_options",opt:e.opt,key:"tdk",type:"category"}).then((function(a){wbui.toast("设置保存成功"),e.form_changed=1,t&&t()}))}},watch:{opt:{handler:function(){this.form_changed++},deep:!0}},beforeRouteLeave:function(t,e,a){var n=this;n.form_changed>1?wbui.open({content:"您修改的设置尚未保存，确定离开此页面吗？",btn:["保存并离开","放弃修改"],yes:function(){return a(!1),n.update_data((function(){a()})),!1},no:function(){return a(),!1}}):a()}},l=c,d=a("5d22"),u=Object(d["a"])(l,n,o,!1,null,null,null);e["default"]=u.exports},"6bd9":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt log-box"},[a("table",{staticClass:"wbs-form-table"},[a("tbody",[a("tr",[a("th",{staticClass:"row w8em"}),a("td",[a("el-button",{attrs:{size:"medium",type:"primary",plain:"",icon:"el-icon-collection"},on:{click:function(e){t.unfold=!t.unfold}}},[t._v("变量注释")]),a("table",{directives:[{name:"show",rawName:"v-show",value:t.unfold,expression:"unfold"}],staticClass:"wbs-table wbs-table-doc table-hover mt"},[t._m(0),a("tbody",t._l(t.doc_items,(function(e){return a("tr",[a("td",[a("b",[t._v(t._s(e.name))])]),a("td",{domProps:{innerHTML:t._s(e.desc)}})])})),0)])],1)])])])])},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("td",[t._v("变量名称")]),a("td",[t._v("变量说明")])])])}],i=a("365c"),r={name:"comVariableDoc",data:function(){return{doc_items:[],unfold:!1}},created:function(){var t=this,e=localStorage.getItem("WB_SST_DOC");e=e?JSON.parse(e):null,e&&e.ver==t.$cnf.pd_version?t.doc_items=e.data:Object(i["b"])({action:t.$cnf.action.act,op:"doc"}).then((function(e){t.doc_items=e["data"],localStorage.setItem("WB_SST_DOC",JSON.stringify({ver:t.$cnf.pd_version,data:e["data"]}))}))}},s=r,c=a("5d22"),l=Object(c["a"])(s,n,o,!1,null,null,null);e["a"]=l.exports},"86be":function(t,e,a){var n=a("14b8"),o=a("cc50"),i=a("af0d"),r=a("aeec"),s=a("15b7").f,c=a("d7eb").f,l=a("7e76"),d=a("f50a"),u=a("d0da"),p=a("5b20"),_=a("3a32"),f=a("4183").set,m=a("bac2"),v=a("0ebe"),b=v("match"),g=o.RegExp,h=g.prototype,w=/a/g,y=/a/g,x=new g(w)!==w,k=u.UNSUPPORTED_Y,C=n&&i("RegExp",!x||k||_((function(){return y[b]=!1,g(w)!=w||g(y)==y||"/a/i"!=g(w,"i")})));if(C){var $=function(t,e){var a,n=this instanceof $,o=l(t),i=void 0===e;if(!n&&o&&t.constructor===$&&i)return t;x?o&&!i&&(t=t.source):t instanceof $&&(i&&(e=d.call(t)),t=t.source),k&&(a=!!e&&e.indexOf("y")>-1,a&&(e=e.replace(/y/g,"")));var s=r(x?new g(t,e):g(t,e),n?this:h,$);return k&&a&&f(s,{sticky:a}),s},O=function(t){t in $||s($,t,{configurable:!0,get:function(){return g[t]},set:function(e){g[t]=e}})},E=c(g),R=0;while(E.length>R)O(E[R++]);h.constructor=$,$.prototype=h,p(o,"RegExp",$)}m("RegExp")},a08b:function(t,e,a){"use strict";var n=a("bde0"),o=a("bd65"),i=a("52fa"),r=a("1201"),s=[].join,c=o!=Object,l=r("join",",");n({target:"Array",proto:!0,forced:c||!l},{join:function(t){return s.call(i(this),void 0===t?",":t)}})},aeec:function(t,e,a){var n=a("b0f9"),o=a("eaf1");t.exports=function(t,e,a){var i,r;return o&&"function"==typeof(i=e.constructor)&&i!==a&&n(r=i.prototype)&&r!==a.prototype&&o(t,r),t}}}]);